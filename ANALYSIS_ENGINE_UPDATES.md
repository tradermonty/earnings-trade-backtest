# Analysis Engine Updates Summary

## すべてのランダムデータを実際の計算に置き換えました

### 1. EPS関連データ
- **EPSサプライズ率**: EODHDのAPIから実際のEPSと予想EPSを取得し、`(実際EPS - 予想EPS) / |予想EPS| * 100`で計算
- **EPS成長率**: 前年同期のEPSと比較し、`(現在EPS - 前年同期EPS) / |前年同期EPS| * 100`で計算
- **EPS加速度**: 前期の成長率と現在の成長率の差として計算

### 2. ギャップサイズ
- エントリー日の始値と前日終値から計算: `(始値 - 前日終値) / 前日終値 * 100`

### 3. 決算前20日間の価格変化率
- 決算前30日間のデータを取得し、20日前の終値と最終日の終値から計算
- `(最終日終値 - 20日前終値) / 20日前終値 * 100`

### 4. 出来高比率
- 直近20日間の平均出来高と過去60日間の平均出来高の比率
- `直近20日平均出来高 / 過去60日平均出来高`

### 5. 移動平均との価格比率
- **MA200比率**: エントリー日の終値 / 200日移動平均
- **MA50比率**: エントリー日の終値 / 50日移動平均

## カテゴリ分類の調整
- **Pre-Earnings Trend**: earnings_backtest.pyと同じビン設定に変更
  - `<-20%`, `-20~-10%`, `-10~0%`, `0~10%`, `10~20%`, `>20%`

これにより、すべての分析がearnings_backtest.pyと同じロジックで実際のデータに基づいて計算されるようになりました。